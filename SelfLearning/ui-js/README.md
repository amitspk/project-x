# Blog Question Injector UI Module

A production-grade JavaScript module that injects exploratory questions into blog content based on placement strategies and displays answers in an animated drawer component.

## 🚀 Features

### **Question Placement Strategies**
- **After Paragraph**: Questions appear after specific paragraphs
- **Before Section**: Questions appear before section headings
- **Inline Highlight**: Clickable highlights within paragraphs
- **Sidebar**: Collapsible sidebar with all questions
- **Floating**: Floating question bubbles on the side

### **Interactive Drawer Component**
- **Animated Slide-in**: Smooth drawer animation from the right
- **Rich Content Display**: Question, detailed answer, and context
- **Action Buttons**: "Search More" and "Got It!" buttons
- **Responsive Design**: Works on desktop and mobile
- **Keyboard Navigation**: ESC key to close drawer

### **Advanced Features**
- **Multiple Themes**: Default, dark, and minimal themes
- **Animation System**: Fade, slide, bounce animations with triggers
- **Confidence Scoring**: Visual indicators for question relevance
- **Analytics Tracking**: Built-in interaction tracking
- **Responsive Design**: Mobile-friendly responsive layout
- **Accessibility**: ARIA labels and keyboard navigation

## 📦 Installation

### **Option 1: Direct Include**
```html
<script src="question-injector.js"></script>
```

### **Option 2: Module Import**
```javascript
import BlogQuestionInjector from './question-injector.js';
```

### **Option 3: CDN (when available)**
```html
<script src="https://cdn.example.com/blog-question-injector/1.0.0/question-injector.min.js"></script>
```

## 🎯 Quick Start

### **Basic Usage**
```javascript
// Load your question data (from generated JSON)
const questionData = await fetch('/api/questions/blog-post-id').then(r => r.json());

// Initialize the injector
const injector = new BlogQuestionInjector(questionData);
await injector.initialize();
```

### **With Custom Options**
```javascript
const injector = new BlogQuestionInjector(questionData, {
    theme: 'dark',
    animationDuration: 500,
    drawerPosition: 'left',
    debugMode: true
});

await injector.initialize();
```

### **Manual Control**
```javascript
const injector = new BlogQuestionInjector(questionData, {
    autoInject: false  // Don't auto-inject questions
});

await injector.initialize();

// Inject specific questions manually
await injector.injectSpecificQuestion('q1');
await injector.injectSpecificQuestion('q3');
```

## 🔧 Configuration Options

```javascript
const options = {
    // Appearance
    theme: 'default',              // 'default', 'dark', 'minimal'
    animationDuration: 300,        // Animation duration in ms
    drawerPosition: 'right',       // 'left', 'right'
    
    // Behavior
    autoInject: true,              // Auto-inject all questions
    debugMode: false,              // Enable console logging
    
    // Custom styling
    customCSS: 'path/to/custom.css'
};
```

## 📋 Question Data Format

The module expects question data in the format generated by the Blog Question Generator:

```json
{
    "content_id": "unique_identifier",
    "content_title": "Blog Post Title",
    "content_url": "https://example.com/blog-post",
    "content_context": {
        "topic": "Main Topic",
        "keywords": ["keyword1", "keyword2"],
        "difficulty_level": "intermediate",
        "content_type": "educational_article",
        "estimated_reading_time": 8
    },
    "questions": [
        {
            "id": "q1",
            "question": "What are the key differences between X and Y?",
            "answer": "Detailed answer explaining the concept...",
            "question_type": "clarification",
            "context": "Brief context from the paragraph",
            "metadata": {
                "placement_strategy": "after_paragraph",
                "target_paragraph": {
                    "paragraph_index": 2,
                    "text_snippet": "First few words of paragraph...",
                    "section_title": "Section Name"
                },
                "priority": 8,
                "trigger_event": "scroll",
                "animation": "fade_in",
                "theme": "default"
            },
            "confidence_score": 0.92
        }
    ],
    "total_questions": 5,
    "average_confidence": 0.87
}
```

## 🎨 Placement Strategies

### **After Paragraph**
```json
{
    "placement_strategy": "after_paragraph",
    "target_paragraph": {
        "paragraph_index": 2,
        "text_snippet": "Machine learning involves...",
        "section_title": "Introduction"
    }
}
```

### **Before Section**
```json
{
    "placement_strategy": "before_section",
    "target_paragraph": {
        "section_title": "Types of Machine Learning"
    }
}
```

### **Inline Highlight**
```json
{
    "placement_strategy": "inline_highlight",
    "target_paragraph": {
        "paragraph_index": 1,
        "text_snippet": "artificial intelligence"
    }
}
```

### **Sidebar**
```json
{
    "placement_strategy": "sidebar"
}
```

### **Floating**
```json
{
    "placement_strategy": "floating"
}
```

## 🎭 Animation System

### **Animation Types**
- `fade_in`: Smooth opacity transition
- `slide_up`: Slide from bottom
- `slide_down`: Slide from top
- `slide_left`: Slide from right
- `slide_right`: Slide from left
- `bounce`: Scale bounce effect

### **Trigger Events**
- `immediate`: Show immediately
- `scroll`: Show when scrolled into view
- `hover`: Show on parent hover
- `click`: Show on parent click
- `time`: Show after 2-second delay

```json
{
    "animation": "slide_up",
    "trigger_event": "scroll"
}
```

## 🎨 Theming

### **Built-in Themes**
```javascript
// Default theme
const injector = new BlogQuestionInjector(data, { theme: 'default' });

// Dark theme
const injector = new BlogQuestionInjector(data, { theme: 'dark' });

// Minimal theme
const injector = new BlogQuestionInjector(data, { theme: 'minimal' });
```

### **Custom Themes**
```css
/* Custom theme example */
.bqi-theme-custom .bqi-question {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
}

.bqi-theme-custom .bqi-question:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
}
```

## 📱 Responsive Design

The module is fully responsive and adapts to different screen sizes:

- **Desktop**: Full sidebar and drawer functionality
- **Tablet**: Adjusted sidebar width and drawer size
- **Mobile**: Optimized touch interactions and smaller floating elements

## 🔧 API Reference

### **Constructor**
```javascript
new BlogQuestionInjector(questionData, options)
```

### **Methods**

#### `initialize()`
Initialize the injector and inject questions
```javascript
await injector.initialize();
```

#### `injectSpecificQuestion(questionId)`
Inject a specific question by ID
```javascript
await injector.injectSpecificQuestion('q1');
```

#### `removeAllQuestions()`
Remove all injected questions
```javascript
injector.removeAllQuestions();
```

#### `getStatistics()`
Get injection statistics
```javascript
const stats = injector.getStatistics();
console.log(stats);
// {
//   totalQuestions: 5,
//   injectedQuestions: 4,
//   averageConfidence: 0.87,
//   contentTopic: "Machine Learning",
//   placementStrategies: ["after_paragraph", "sidebar", "floating"]
// }
```

#### `destroy()`
Clean up and remove the injector
```javascript
injector.destroy();
```

## 📊 Analytics Integration

### **Built-in Tracking**
The module automatically tracks user interactions:

```javascript
// Events tracked:
// - question_clicked
// - drawer_opened
// - drawer_closed
// - search_more_clicked
```

### **Google Analytics Integration**
```javascript
// Automatic integration if gtag is available
window.gtag('event', 'question_clicked', {
    custom_parameter_1: questionId,
    custom_parameter_2: contentId
});
```

### **Custom Analytics**
```javascript
const injector = new BlogQuestionInjector(data, {
    onInteraction: (event, questionId) => {
        // Send to your analytics service
        analytics.track(event, { questionId });
    }
});
```

## 🚀 Integration Examples

### **WordPress Integration**
```php
// In your theme's functions.php
function enqueue_question_injector() {
    wp_enqueue_script('question-injector', 
        get_template_directory_uri() . '/js/question-injector.js', 
        array(), '1.0.0', true);
    
    // Localize question data
    wp_localize_script('question-injector', 'questionData', 
        get_post_meta(get_the_ID(), 'generated_questions', true));
}
add_action('wp_enqueue_scripts', 'enqueue_question_injector');
```

### **React Integration**
```jsx
import { useEffect, useRef } from 'react';
import BlogQuestionInjector from './question-injector';

function BlogPost({ questionData }) {
    const injectorRef = useRef(null);
    
    useEffect(() => {
        const initInjector = async () => {
            injectorRef.current = new BlogQuestionInjector(questionData);
            await injectorRef.current.initialize();
        };
        
        initInjector();
        
        return () => {
            if (injectorRef.current) {
                injectorRef.current.destroy();
            }
        };
    }, [questionData]);
    
    return (
        <article>
            {/* Your blog content */}
        </article>
    );
}
```

### **Vue.js Integration**
```vue
<template>
    <article class="blog-content">
        <!-- Your blog content -->
    </article>
</template>

<script>
import BlogQuestionInjector from './question-injector';

export default {
    props: ['questionData'],
    
    async mounted() {
        this.injector = new BlogQuestionInjector(this.questionData);
        await this.injector.initialize();
    },
    
    beforeDestroy() {
        if (this.injector) {
            this.injector.destroy();
        }
    }
};
</script>
```

## 🔒 Security Considerations

### **XSS Prevention**
- All user content is automatically escaped
- HTML sanitization for answer content
- Safe innerHTML usage with validation

### **Content Security Policy**
```html
<meta http-equiv="Content-Security-Policy" 
      content="script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline';">
```

## 🐛 Troubleshooting

### **Questions Not Appearing**
1. Check console for errors
2. Verify question data format
3. Ensure target paragraphs exist
4. Enable debug mode: `{ debugMode: true }`

### **Drawer Not Opening**
1. Check for CSS conflicts
2. Verify z-index values
3. Test with minimal theme
4. Check for JavaScript errors

### **Performance Issues**
1. Limit concurrent questions
2. Use `autoInject: false` for manual control
3. Optimize animation duration
4. Consider lazy loading for large datasets

## 📈 Performance

### **Optimization Features**
- Efficient DOM querying with caching
- Intersection Observer for scroll triggers
- Debounced resize handlers
- Memory leak prevention

### **Bundle Size**
- **Minified**: ~15KB
- **Gzipped**: ~5KB
- **No dependencies**: Pure vanilla JavaScript

## 🔄 Browser Support

- **Chrome**: 60+
- **Firefox**: 55+
- **Safari**: 12+
- **Edge**: 79+
- **Mobile**: iOS 12+, Android 7+

## 📝 License

MIT License - see LICENSE file for details.

## 🤝 Contributing

1. Fork the repository
2. Create a feature branch
3. Add tests for new functionality
4. Submit a pull request

## 📞 Support

- **Documentation**: [Link to docs]
- **Issues**: [GitHub Issues]
- **Email**: support@example.com

---

**Built with ❤️ for better blog engagement and learning experiences.**
